---
title : 'LeetCodeå‘¨èµ›399(240526)'
date : 2024-05-27T15:37:01+08:00
lastmod: 2024-05-27T15:37:01+08:00
description : "LeetCode å‘¨èµ› 399(240527)" 
image : img/cat.jpg
draft : false    
categories : ["LeetCode"]
tags : ["LeetCodeå‘¨èµ›"]
# password : leetcode
---


# å‘¨èµ›399(240526)

è¿™åœºæ‰åˆ†äº†ï¼Œç¬¬å››é¢˜æ²¡æ€è·¯ï¼Œè€Œä¸”ç½šæ—¶å¤ªå¤šäº†ğŸ˜¥

## ç¬¬ä¸‰é¢˜[3164. ä¼˜è´¨æ•°å¯¹çš„æ€»æ•° II](https://leetcode.cn/problems/find-the-number-of-good-pairs-ii/)

**é¢˜ç›®å¤§æ„**ï¼š
ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„`nums1`å’Œ`nums2`ï¼Œä»¥åŠä¸€ä¸ªæ­£æ•´æ•°kã€‚å¦‚æœ`nums1[i]`å¯ä»¥è¢«`nums2[j]*k`æ•´é™¤ï¼Œåˆ™ç§°æ•°å¯¹`(i, j)`ä¸ºä¼˜è´¨æ•°å¯¹ã€‚è¦æ±‚è®¡ç®—ä¼˜è´¨æ•°å¯¹çš„æ€»æ•°ã€‚

**å®ç°æ€è·¯**ï¼š

1. é¦–å…ˆï¼Œä½¿ç”¨`Counter`ç»Ÿè®¡`nums1`ä¸­å¯ä»¥è¢«kæ•´é™¤çš„æ•°é™¤ä»¥`k`çš„ç»“æœï¼Œå¾—åˆ°`c1`ã€‚
2. ç„¶åï¼Œæ‰¾åˆ°`c1`ä¸­çš„æœ€å¤§å€¼`mx`ï¼Œå¦‚æœ`c1`ä¸ºç©ºï¼Œåˆ™`mx`ä¸º`0`ã€‚
3. ä½¿ç”¨`Counter`ç»Ÿè®¡`nums2`ä¸­å„ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå¾—åˆ°`c2`ã€‚
4. åˆå§‹åŒ–ç»“æœ`res`ä¸º`0`ã€‚
5. éå†`c2`ä¸­çš„æ¯ä¸ªæ•°`nm`å’Œå…¶å‡ºç°çš„æ¬¡æ•°cï¼Œå¯¹äºæ¯ä¸ªæ•°`nm`ï¼Œä»`nm`å¼€å§‹é€’å¢åˆ°`mx`ï¼Œæ­¥é•¿ä¸º`nm`ï¼Œè®¡ç®—c * c1[j]å¹¶ç´¯åŠ åˆ°`res`ä¸­ã€‚
6. æœ€ç»ˆè¿”å›`res`ä½œä¸ºä¼˜è´¨æ•°å¯¹çš„æ€»æ•°ã€‚

```py
class Solution:
    def numberOfPairs(self, nums1: List[int], nums2: List[int], k: int) -> int:
        c1 = Counter(nm//k for nm in nums1 if nm%k==0)
        mx = max(nm for nm, _ in c1.items()) if c1 else 0
        c2 = Counter(nums2)

        res = 0
        for nm, c in c2.items():
            for j in range(nm, mx+1, nm):
                res += c * c1[j]
        
        return res
```

## ç¬¬å››é¢˜[3165. ä¸åŒ…å«ç›¸é‚»å…ƒç´ çš„å­åºåˆ—çš„æœ€å¤§å’Œ](https://leetcode.cn/problems/maximum-sum-of-subsequence-with-non-adjacent-elements/)

### é¢˜ç›®å¤§æ„
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªäºŒç»´æ•°ç»„ `queries`ï¼Œå…¶ä¸­ `queries[i] = [posi, xi]` è¡¨ç¤ºå¯¹äºæ¯ä¸ªæŸ¥è¯¢ `i`ï¼Œé¦–å…ˆå°† `nums[posi]` è®¾ç½®ä¸º `xi`ï¼Œç„¶åè®¡ç®—æŸ¥è¯¢ `i` çš„ç­”æ¡ˆã€‚ç­”æ¡ˆä¸º `nums` ä¸­ä¸åŒ…å«ç›¸é‚»å…ƒç´ çš„å­åºåˆ—çš„æœ€å¤§å’Œã€‚æœ€ç»ˆè¿”å›æ‰€æœ‰æŸ¥è¯¢çš„ç­”æ¡ˆä¹‹å’Œã€‚

### å®ç°æ€è·¯
1. æ„å»ºçº¿æ®µæ ‘ï¼šä½¿ç”¨çº¿æ®µæ ‘ç»´æŠ¤åŒºé—´çš„æœ€å¤§å’Œã€‚
   - çº¿æ®µæ ‘èŠ‚ç‚¹ `tr[u]` å­˜å‚¨äº†å››ä¸ªå€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š
     1. ä¸è·¨è¶ŠåŒºé—´çš„æœ€å¤§å’Œï¼ˆæ— ç›¸é‚»å…ƒç´ ï¼‰ã€‚
     2. åŒºé—´å·¦ç«¯ç‚¹ä¸ºèµ·ç‚¹çš„æœ€å¤§å’Œï¼ˆæ— ç›¸é‚»å…ƒç´ ï¼‰ã€‚
     3. åŒºé—´å³ç«¯ç‚¹ä¸ºèµ·ç‚¹çš„æœ€å¤§å’Œï¼ˆæ— ç›¸é‚»å…ƒç´ ï¼‰ã€‚
     4. åŒºé—´çš„æœ€å¤§å’Œã€‚
   - å®šä¹‰ `pushup` å‡½æ•°æ›´æ–°èŠ‚ç‚¹å€¼ï¼Œå®šä¹‰ `build` å‡½æ•°æ„å»ºçº¿æ®µæ ‘ã€‚
2. æ›´æ–°æ“ä½œï¼šæ›´æ–°çº¿æ®µæ ‘ä¸­çš„èŠ‚ç‚¹å€¼ã€‚
   - å®šä¹‰ `update` å‡½æ•°æ›´æ–°çº¿æ®µæ ‘ä¸­çš„èŠ‚ç‚¹å€¼ã€‚
3. éå†æŸ¥è¯¢ï¼šå¯¹æ¯ä¸ªæŸ¥è¯¢ï¼Œæ›´æ–° `nums` ä¸­å¯¹åº”ä½ç½®çš„å€¼ï¼Œå¹¶è®¡ç®—å½“å‰çš„æœ€å¤§å’Œã€‚
4. æœ€ç»ˆè¿”å›æ‰€æœ‰æŸ¥è¯¢çš„ç­”æ¡ˆä¹‹å’Œï¼Œè®°å¾—å¯¹ç»“æœå–æ¨¡ã€‚

```py
class Solution:
    def maximumSumSubsequence(self, nums: List[int], queries: List[List[int]]) -> int:
        def pushup(u):
            l, r = tr[u<<1], tr[u<<1|1]
            tr[u][0] = max(l[1]+r[0], l[0]+r[2])
            tr[u][1] = max(l[0]+r[3], l[1]+r[1])
            tr[u][2] = max(l[2]+r[2], l[3]+r[0])
            tr[u][3] = max(l[2]+r[3], l[3]+r[1])

        def build(u, l, r):
            if l==r:
                tr[u][3] = max(nums[l], 0)
            else:
                mid = l+r>>1
                build(u<<1, l, mid)
                build(u<<1|1, mid+1, r)
                pushup(u)
            
        def update(u, l, r, x, val):
            if l==r:
                tr[u][3] = max(0, val)
                return 
            
            mid = l+r>>1
            if x<=mid:
                update(u<<1, l, mid, x, val)
            else:
                update(u<<1|1, mid+1, r, x, val)
            
            pushup(u)
        
        n = len(nums)
        tr = [[0]*4 for _ in range(1<<n.bit_length() + 1)]
        mod = int(1e9) + 7
        res = 0
        build(1, 0, n-1)
        for pos, x in queries:
            update(1, 0, n-1, pos, x)
            res = (res + tr[1][3])%mod
        
        return res
```

