# LeetCode Hot 100 ç²¾ç»ƒğŸ¥¸

è®°å¿†ä¸­çš„ä¸œè¥¿ä¸€å®šä¼šæ¶ˆé€€ï¼ŒçœŸæ­£ç•™ä¸‹çš„æ‰æ˜¯å­¦åˆ°çš„ï¼Œä¸€å®šè¦åŠæ—¶å›é¡¾ã€‚

## [76. æœ€å°è¦†ç›–å­ä¸²](https://leetcode.cn/problems/minimum-window-substring/)

**é¢˜ç›®å¤§æ„**ï¼šç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ã€ä¸€ä¸ªå­—ç¬¦ä¸² `t` ã€‚è¿”å› `s` ä¸­æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ `s` ä¸­ä¸å­˜åœ¨æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² `""` ã€‚

**æ€è·¯**ï¼šåŒæŒ‡é’ˆï¼Œä¸ºäº†ä¿è¯å¯¹äºæ¯ä¸€ä¸ªå³ç«¯ç‚¹ï¼Œéƒ½èƒ½æ‰¾åˆ°æœ€ä¼˜çš„å·¦ç«¯ç‚¹ï¼Œå¯¹æ‰€æœ‰çš„å·²ç»éå†çš„å­—ç¬¦éƒ½è¦è®¡æ•°`-1`ï¼Œ è¿™æ ·åœ¨æ¯ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å³ç«¯ç‚¹åˆ¤æ–­æ¯ä¸ªå­—ç¬¦æ˜¯å¦æœ‰å¤šä½™ï¼Œè¿™æ ·ç¡®ä¿å·¦ç«¯ç‚¹æœ€ä¼˜ã€‚

```py
class Solution:
    def minWindow(self, s: str, t: str) -> str:
        m, n = len(s), len(t)
        needCnt = n
        need = Counter(t)

        res = (0, m)

        left = 0
        for right, ch in enumerate(s):
            if need[ch] > 0:
                needCnt -= 1
            need[ch] -= 1 # å…³é”®ç‚¹

            if needCnt == 0:
                while need[s[left]]!=0: # ä¿è¯å¯¹äºæ¯ä¸ªç¬¦åˆçš„å³ç«¯ç‚¹ï¼Œéƒ½å¯ä»¥æ‰¾åˆ°æœ€ä¼˜çš„å·¦ç«¯ç‚¹
                    need[s[left]] += 1
                    left += 1
                if right - left + 1 < res[1] - res[0] + 1:
                    res = (left, right)
                needCnt += 1
                need[s[left]] += 1
                left += 1
                
        return s[res[0]:res[1]+1] if res[1] < m else ""
```

## [301. åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/remove-invalid-parentheses/)

**é¢˜ç›®å¤§æ„ï¼š**

ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹²æ‹¬å·å’Œå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `s` ï¼Œåˆ é™¤æœ€å°æ•°é‡çš„æ— æ•ˆæ‹¬å·ï¼Œä½¿å¾—è¾“å…¥çš„å­—ç¬¦ä¸²æœ‰æ•ˆã€‚

è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

#### å›æº¯

**å®ç°æ€è·¯ï¼š**

1. **ç»Ÿè®¡æ— æ•ˆæ‹¬å·æ•°é‡ï¼š**
   - é¦–å…ˆéå†å­—ç¬¦ä¸²sï¼Œç»Ÿè®¡å·¦æ‹¬å·å’Œå³æ‹¬å·çš„æ•°é‡lå’Œrï¼Œå…¶ä¸­lè¡¨ç¤ºæœªåŒ¹é…çš„å·¦æ‹¬å·æ•°é‡ï¼Œrè¡¨ç¤ºéœ€è¦åˆ é™¤çš„å³æ‹¬å·æ•°é‡ã€‚

2. **å›æº¯ç®—æ³•ï¼š**
   - ç¼–å†™å›æº¯ç®—æ³•æ¥å°è¯•åˆ é™¤ä¸åŒä½ç½®çš„æ‹¬å·ï¼Œä½¿å¾—å­—ç¬¦ä¸²æœ‰æ•ˆã€‚
   - å›æº¯è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ä»¥ä¸‹æƒ…å†µï¼š
     - å·²ç»åŒ¹é…çš„æ‹¬å·æ•°é‡lnå’Œrnï¼Œä»¥åŠå½“å‰ä½ç½®iã€‚
     - éå†å­—ç¬¦ä¸²sçš„æ¯ä¸ªå­—ç¬¦ï¼Œå½“é‡åˆ°é‡å¤çš„å­—ç¬¦æ—¶è·³è¿‡ï¼Œä»¥é¿å…é‡å¤ç»“æœã€‚
     - å¦‚æœå½“å‰å­—ç¬¦ä¸ºå·¦æ‹¬å·å¹¶ä¸”lnä¸ä¸º0ï¼Œåˆ™é€’å½’è°ƒç”¨åˆ é™¤å½“å‰å·¦æ‹¬å·çš„æƒ…å†µï¼Œlnå‡ä¸€ï¼Œå¦åˆ™ç»§ç»­ã€‚
     - å¦‚æœå½“å‰å­—ç¬¦ä¸ºå³æ‹¬å·å¹¶ä¸”rnä¸ä¸º0ï¼Œåˆ™é€’å½’è°ƒç”¨åˆ é™¤å½“å‰å³æ‹¬å·çš„æƒ…å†µï¼Œrnå‡ä¸€ï¼Œå¦åˆ™ç»§ç»­ã€‚

3. **æ£€æŸ¥å­—ç¬¦ä¸²æœ‰æ•ˆæ€§ï¼š**
   - ç¼–å†™è¾…åŠ©å‡½æ•°`check`æ¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆï¼Œå³å·¦å³æ‹¬å·æ•°é‡æ˜¯å¦åŒ¹é…ã€‚

4. **è¿”å›ç»“æœï¼š**
   - å°†æ‰€æœ‰æœ‰æ•ˆçš„å­—ç¬¦ä¸²ç»“æœæ·»åŠ åˆ°ç»“æœåˆ—è¡¨retä¸­ï¼Œå¹¶è¿”å›ã€‚

```py
class Solution:
    def removeInvalidParentheses(self, s: str) -> List[str]:
        l, r = 0, 0
        ret = []
        n = len(s)

        for c in s:
            if c=='(':
                l+=1
            elif c==')':
                if l==0:
                    r+=1
                else:
                    l-=1

        def check(st):
            cnt=0
            for c in st:
                if c=='(':
                    cnt+=1
                elif c==')':
                    cnt-=1
                    if cnt<0:
                        return False
            return (cnt==0)
        
        def backtrace(st, start, ln, rn):
            if ln==0 and rn==0 and check(st):
                ret.append(st[:])
                return 
            for i in range(start, len(st)):
                if i>start and st[i]==st[i-1]:
                    continue
                if ln+rn>n-1-i+1:
                    break
                if ln and st[i]=='(':
                    backtrace(st[:i]+st[i+1:], i, ln-1, rn)
                elif rn and st[i]==')':
                    backtrace(st[:i]+st[i+1:], i, ln, rn-1)
                
        backtrace(s, 0, l, r)
        return ret
```

#### å¹¿æœ

è¿™ä¸ªå®ç°ä½¿ç”¨äº†å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰çš„æ€è·¯æ¥è§£å†³é—®é¢˜ã€‚

1. **BFSæœç´¢ï¼š**
   - ä½¿ç”¨ä¸€ä¸ªé›†åˆ`cur`æ¥å­˜å‚¨å½“å‰å±‚çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œåˆå§‹æ—¶å°†è¾“å…¥çš„å­—ç¬¦ä¸²`s`åŠ å…¥é›†åˆ`cur`ä¸­ã€‚
   - åœ¨æ¯ä¸€è½®å¾ªç¯ä¸­ï¼Œéå†å½“å‰é›†åˆ`cur`ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¦‚æœå…¶ä¸­æœ‰å­—ç¬¦ä¸²æ˜¯æœ‰æ•ˆçš„ï¼Œåˆ™å°†å…¶åŠ å…¥ç»“æœåˆ—è¡¨`ret`ä¸­ã€‚
   - å¦‚æœç»“æœåˆ—è¡¨`ret`ä¸ä¸ºç©ºï¼Œåˆ™è·³å‡ºå¾ªç¯ï¼Œè¡¨ç¤ºå·²ç»æ‰¾åˆ°äº†æ‰€æœ‰æœ‰æ•ˆçš„å­—ç¬¦ä¸²ã€‚
   - å¦‚æœç»“æœåˆ—è¡¨`ret`ä¸ºç©ºï¼Œåˆ™éœ€è¦ç»§ç»­è¿›è¡Œä¸‹ä¸€è½®æœç´¢ï¼Œå°†å½“å‰é›†åˆ`cur`ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ é™¤ä¸€ä¸ªæ‹¬å·çš„æ–¹å¼ï¼Œç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„ä¸‹ä¸€å±‚å­—ç¬¦ä¸²ï¼ŒåŠ å…¥åˆ°é›†åˆ`nxt`ä¸­ã€‚
   - æ›´æ–°å½“å‰é›†åˆ`cur`ä¸º`nxt`ï¼Œç»§ç»­ä¸‹ä¸€è½®æœç´¢ã€‚

2. **æ£€æŸ¥å­—ç¬¦ä¸²æœ‰æ•ˆæ€§ï¼š**
   - å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°`check`ï¼Œç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚
   - éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œé‡åˆ°å·¦æ‹¬å·æ—¶å¢åŠ è®¡æ•°å™¨`cnt`ï¼Œé‡åˆ°å³æ‹¬å·æ—¶å¦‚æœ`cnt`ä¸º0åˆ™è¿”å›Falseï¼ˆè¡¨ç¤ºå³æ‹¬å·æ²¡æœ‰åŒ¹é…çš„å·¦æ‹¬å·ï¼‰ï¼Œå¦åˆ™å‡å°‘`cnt`ã€‚
   - æœ€ç»ˆåˆ¤æ–­`cnt`æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0è¡¨ç¤ºå­—ç¬¦ä¸²æœ‰æ•ˆã€‚

3. **è¿”å›ç»“æœï¼š**
   - è¿”å›ç»“æœåˆ—è¡¨`ret`ï¼Œå…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰æœ‰æ•ˆçš„å­—ç¬¦ä¸²ã€‚

```py
class Solution:
    def removeInvalidParentheses(self, s: str) -> List[str]:
        ret = []
        
        def check(st):
            cnt=0
            for c in st:
                if c=='(':
                    cnt+=1
                elif c==')':
                    if cnt==0:
                        return False
                    cnt-=1
            return cnt==0
        
        cur = set([s])
        
        while True:
            for st in cur:
                if check(st):
                    ret.append(st)
            if len(ret):
                break
            nxt = set()
            for st in cur:
                for i in range(len(st)):
                    if i>0 and st[i]==st[i-1]:
                        continue
                    if st[i]=='(' or st[i]==')':
                        nxt.add(st[:i]+st[i+1:])
            cur = nxt
        return ret
```

## [297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–](https://leetcode.cn/problems/serialize-and-deserialize-binary-tree/)

ä¸æ­¢ç¬¬ä¸€æ¬¡é‡åˆ°äº†ã€‚

- **é¢˜ç›®å¤§æ„**ï¼šåºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œä»è€Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶æˆ–å†…å­˜ä¸­ï¼Œå¹¶ä¸”é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒä¸­ã€‚æœ¬é¢˜è¦æ±‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå³å°†äºŒå‰æ ‘è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶å°†å­—ç¬¦ä¸²è½¬æ¢å›åŸå§‹çš„äºŒå‰æ ‘ç»“æ„ã€‚

- **å®ç°æ€è·¯**ï¼š

1. åºåˆ—åŒ–ï¼šä½¿ç”¨é€’å½’å°†äºŒå‰æ ‘è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ ¹èŠ‚ç‚¹å€¼ä¸å·¦å³å­æ ‘åºåˆ—åŒ–ç»“æœä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œç©ºèŠ‚ç‚¹ç”¨ '#' è¡¨ç¤ºã€‚
2. ååºåˆ—åŒ–ï¼šä½¿ç”¨é€’å½’å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒå‰æ ‘ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° DerWork()ï¼Œç”¨äºé€’å½’æ„å»ºäºŒå‰æ ‘ã€‚åœ¨è¯¥å‡½æ•°ä¸­ï¼ŒæŒ‰ç…§å‰åºéå†çš„é¡ºåºï¼Œä¾æ¬¡æå–å­—ç¬¦ä¸²ä¸­çš„èŠ‚ç‚¹å€¼ï¼Œå¹¶æ ¹æ®èŠ‚ç‚¹å€¼æ„å»ºäºŒå‰æ ‘èŠ‚ç‚¹ã€‚å¦‚æœèŠ‚ç‚¹å€¼ä¸º '#'ï¼Œè¡¨ç¤ºç©ºèŠ‚ç‚¹ï¼Œè¿”å› Noneã€‚å¦åˆ™ï¼Œåˆ›å»ºèŠ‚ç‚¹å¹¶é€’å½’æ„å»ºå…¶å·¦å³å­æ ‘ã€‚
3. åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ self.s æ¥è®°å½•å½“å‰å¾…å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡é€’å½’å¤„ç†åï¼Œå°†å­—ç¬¦ä¸²ä¸­å·²ç»å¤„ç†è¿‡çš„éƒ¨åˆ†å‰”é™¤ï¼Œç»§ç»­å¤„ç†å‰©ä½™éƒ¨åˆ†ã€‚
4. æœ€ç»ˆè¿”å›æ ¹èŠ‚ç‚¹å³å¯ã€‚

```py
# Definition for a binary tree node.
# class TreeNode(object):
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Codec:

    def serialize(self, root):
        """Encodes a tree to a single string.
        
        :type root: TreeNode
        :rtype: str
        """
        if not root:
            return '#'
        return str(root.val)+' '+self.serialize(root.left)+' '+self.serialize(root.right)

    def deserialize(self, data):
        """Decodes your encoded data to tree.
        
        :type data: str
        :rtype: TreeNode
        """
        self.s = data
        return self.DerWork()
    def DerWork(self):
        if len(self.s)==0:
            return None
        try:
            idx = self.s.index(' ')
        except:
            idx = -1
        node = self.s if idx==-1 else self.s[:idx]
        self.s = '' if idx==-1 else self.s[idx+1:]
        if node=='#':
            return None
        t = TreeNode(int(node))
        t.left = self.DerWork()
        t.right = self.DerWork()
        return t        

# Your Codec object will be instantiated and called as such:
# ser = Codec()
# deser = Codec()
# ans = deser.deserialize(ser.serialize(root))
```

## [84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode.cn/problems/largest-rectangle-in-histogram/)

- **é¢˜ç›®å¤§æ„**ï¼šç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1ã€‚æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºçš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

- **å®ç°æ€è·¯**ï¼š

1. ä½¿ç”¨å•è°ƒæ ˆè§£å†³é—®é¢˜ã€‚åˆ›å»ºä¸¤ä¸ªæ•°ç»„ l å’Œ rï¼Œåˆ†åˆ«è®°å½•æ¯ä¸ªæŸ±å­å‘å·¦å’Œå‘å³ç¬¬ä¸€ä¸ªæ¯”å…¶é«˜åº¦å°çš„æŸ±å­çš„ç´¢å¼•ä½ç½®ã€‚
2. åˆå§‹åŒ–ä¸€ä¸ªç©ºæ ˆ stkã€‚
3. éå†æŸ±å­çš„é«˜åº¦åˆ—è¡¨ heightsï¼š
   - è‹¥æ ˆä¸ä¸ºç©ºä¸”å½“å‰æŸ±å­çš„é«˜åº¦å°äºæ ˆé¡¶æŸ±å­çš„é«˜åº¦ï¼Œåˆ™å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œå¹¶æ›´æ–°æ ˆé¡¶å…ƒç´ å¯¹åº”çš„ r å€¼ä¸ºå½“å‰æŸ±å­çš„ç´¢å¼•ã€‚
   - è‹¥æ ˆä¸ºç©ºæˆ–è€…å½“å‰æŸ±å­çš„é«˜åº¦å¤§äºæ ˆé¡¶æŸ±å­çš„é«˜åº¦ï¼Œåˆ™å°†å½“å‰æŸ±å­çš„ç´¢å¼•å…¥æ ˆã€‚
   - åœ¨æ›´æ–° r å€¼çš„åŒæ—¶ï¼Œè‹¥æ ˆä¸ä¸ºç©ºï¼Œåˆ™æ›´æ–°å½“å‰æŸ±å­çš„ l å€¼ä¸ºæ ˆé¡¶å…ƒç´ çš„ç´¢å¼•ã€‚
4. éå†å®Œæˆåï¼Œå¯¹äºæ¯ä¸ªæŸ±å­ iï¼Œè®¡ç®—ä»¥è¯¥æŸ±å­ä¸ºé«˜åº¦çš„çŸ©å½¢é¢ç§¯ä¸º (r[i] - l[i] - 1) * heights[i]ï¼Œå–æœ€å¤§å€¼å³ä¸ºæ‰€æ±‚çš„æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚
5. è‹¥æŸ±çŠ¶å›¾ä¸ºç©ºï¼Œåˆ™è¿”å› 0ã€‚

```py
class Solution:
    def largestRectangleArea(self, heights: List[int]) -> int:
        # å•è°ƒæ ˆï¼Œæ‰¾åˆ°æ¯ä¸ªé«˜åº¦èƒ½ç»„æˆçš„æœ€å¤§çŸ©å½¢
        # å¾€å·¦å³ä¸¤é¢æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äº è‡ªèº«é«˜åº¦çš„æŸ±å­ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæŸ±å­ä¹‹é—´çš„æŸ±å­ä¸€å®šå¯ä»¥è¾¾åˆ°è‡ªèº«çš„é«˜åº¦ï¼Œæ‰€ä»¥æ˜¯è‡ªèº«é«˜åº¦å¯ä»¥ç»„æˆçš„æœ€å¤§é¢ç§¯
        n = len(heights)
        l, r = [-1]*n, [n]*n 
        res = 0

        stk = []
        for i in range(n):
            h = heights[i]
            while stk and heights[stk[-1]] >= h:
                r[stk[-1]] = i
                stk.pop()
            if stk:
                l[i] = stk[-1]
            stk.append(i)

        # stk = []
        # for i in range(n-1, -1, -1):
        #     h = heights[i]
        #     while stk and heights[stk[-1]] >= h:
        #         stk.pop()
        #     if stk:
        #         r[i] = stk[-1]
        #     stk.append(i)
        
        for i in range(n):
            if heights[i] * (r[i]-l[i]-1) > res:
                res = heights[i] * (r[i]-l[i]-1)
        
        return res
```

## [85. æœ€å¤§çŸ©å½¢](https://leetcode.cn/problems/maximal-rectangle/)

- **é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªä»…åŒ…å« 0 å’Œ 1ã€å¤§å°ä¸º rows x cols çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« 1 çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

- **å®ç°æ€è·¯**ï¼š

1. å°†é—®é¢˜è½¬åŒ–ä¸ºçŸ©å½¢æœ€å¤§é¢ç§¯é—®é¢˜ã€‚
2. å®šä¹‰å˜é‡ area ç”¨äºè®°å½•æœ€å¤§çŸ©å½¢çš„é¢ç§¯ã€‚
3. åˆ›å»ºäºŒç»´æ•°ç»„ leftï¼Œç”¨äºè®°å½•æ¯ä¸ªä½ç½® (i, j) å·¦ä¾§è¿ç»­ 1 çš„ä¸ªæ•°ã€‚
4. éå†äºŒç»´çŸ©é˜µï¼Œåˆå§‹åŒ– left æ•°ç»„ï¼š
   - è‹¥å½“å‰ä½ç½®ä¸º '1'ï¼Œåˆ™ left[i][j] ç­‰äº left[i][j-1] + 1ï¼Œå¦åˆ™ä¸º 0ã€‚
5. éå†çŸ©é˜µçš„æ¯ä¸€åˆ—ï¼Œå¯¹äºæ¯ä¸€åˆ— jï¼Œä½¿ç”¨å•è°ƒæ ˆæ¥è®¡ç®—ä»¥å½“å‰åˆ—ä¸ºåº•è¾¹çš„æœ€å¤§çŸ©å½¢çš„é¢ç§¯ï¼š
   - åˆå§‹åŒ–ä¸€ä¸ªç©ºæ ˆ stkã€‚
   - å®šä¹‰ä¸¤ä¸ªæ•°ç»„ up å’Œ downï¼Œåˆ†åˆ«è®°å½•å½“å‰ä½ç½®ä¸Šæ–¹ç¬¬ä¸€ä¸ªå°äºç­‰äºå…¶é«˜åº¦çš„ä½ç½®å’Œä¸‹æ–¹ç¬¬ä¸€ä¸ªå°äºç­‰äºå…¶é«˜åº¦çš„ä½ç½®ã€‚
   - éå†çŸ©é˜µçš„æ¯ä¸€è¡Œ iï¼Œè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š
     - å½“æ ˆä¸ä¸ºç©ºä¸”æ ˆé¡¶ä½ç½®å¯¹åº”çš„ left å€¼å¤§äºç­‰äºå½“å‰ä½ç½®çš„ left å€¼æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶ä½ç½®ï¼Œå¹¶æ›´æ–° down å€¼ã€‚
     - å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™å½“å‰ä½ç½®çš„ up å€¼ä¸º -1ï¼Œå¦åˆ™ä¸ºæ ˆé¡¶ä½ç½®ã€‚
     - å°†å½“å‰è¡Œç´¢å¼•å…¥æ ˆã€‚
   - åœ¨è®¡ç®—å½“å‰åˆ—çš„çŸ©å½¢é¢ç§¯æ—¶ï¼Œheight ä¸º down[i] - up[i] - 1ï¼Œå®½åº¦ä¸º left[i][j]ï¼Œè®¡ç®—å½“å‰åˆ—çš„æœ€å¤§é¢ç§¯å¹¶æ›´æ–° areaã€‚
6. è¿”å›æœ€å¤§é¢ç§¯ areaã€‚

```py
class Solution:
    def maximalRectangle(self, matrix: List[List[str]]) -> int:
        # è½¬åŒ–ä¸ºçŸ©å½¢æœ€å¤§é¢ç§¯é—®é¢˜
        n, m = len(matrix), len(matrix[0])
        area = 0
        left = [[0]*m for _ in range(n)]
        
        for i in range(n):
            for j in range(m):
                if matrix[i][j]=='1':
                    left[i][j] += left[i][j-1]+1 if j else 1
                    
        for j in range(m):
            stk = []
            up, down = [-1]*n, [n]*n
            for i in range(n): #è¡Œ
                while stk and left[ stk[-1] ][j]>=left[i][j]:
                    down[stk[-1]] = i
                    stk.pop()
                up[i] = stk[-1] if stk else -1
                stk.append(i)

            for i in range(n):
                height = down[i]-up[i]-1
                area = max(area, height*left[i][j])
        return area
```

## [312. æˆ³æ°”çƒ](https://leetcode.cn/problems/burst-balloons/)

- **é¢˜æ„**ï¼šç»™å®šnä¸ªæ•°å­—`num[0~n-1]`,æ¯æ¬¡æˆ³ç ´ä¸€ä¸ªæ°”çƒå¯ä»¥è·å¾—`nums[i-1]*nums[i]*nums[i+1]`ä¸ªç¡¬å¸ï¼Œæœ€ä¸¤æ—é»˜è®¤ä¸º1ï¼Œé—®æœ€ç»ˆè·å¾—çš„æœ€å¤§ç¡¬å¸æ•°é‡ã€‚
- **æ€è·¯**ï¼šåŒºé—´DPï¼Œé€†å‘æ€ç»´, æ€è€ƒå¦‚ä½•æ”¾æ°”çƒèƒ½ä½¿ç¡¬å¸æœ€å¤§ï¼Œ`f[i][j]`ä»£è¡¨**å¼€åŒºé—´**`i~j`å¯ä»¥è·å¾—çš„æœ€å¤§ç¡¬å¸ï¼Œ å…ˆæšä¸¾å°åŒºé—´ï¼Œå†æšä¸¾å¤§åŒºé—´ï¼Œæšä¸¾åŒºé—´å†…æ¯ä¸ªæ•°å­—ï¼ŒçŠ¶æ€è½¬ç§»æœ‰ï¼š`f[i][j] = max(f[i][j], f[i][k]+f[k][j]+nums[i]*nums[k]*nums[j])`ã€‚æœ€ç»ˆè¾“å‡º`f[0][n+1]`

```py
class Solution:
    def maxCoins(self, nums: List[int]) -> int:
        n = len(nums)
        nums = [1]+nums+[1]
        f = [[0]*(n+5) for _ in range(n+5)]
        # å¼€åŒºé—´ (left, right) åŒºé—´å†…èƒ½è·å¾—çš„æœ€å¤§ç¡¬å¸
        for l in range(2,n+2): # len:2~n+1
            for i in range(n+1-l+1): # left:0~n+1-len
                j=i+l # right = left + len
                for k in range(i+1, j): # å¼€åŒºé—´(i,j) å³[i+1, j-1]
                    f[i][j] = max(f[i][j], f[i][k]+f[k][j]+nums[i]*nums[k]*nums[j])
        
        return f[0][n+1]
```

## [301. åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/remove-invalid-parentheses/)

- **é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªç”±å­—æ¯å’Œæ‹¬å·ç»„æˆçš„å­—ç¬¦ä¸²sï¼Œè¦æ±‚åˆ é™¤æœ€å°æ•°é‡çš„æ‹¬å·ï¼Œä½¿å¾—å­—ç¬¦ä¸²æˆä¸ºæœ‰æ•ˆçš„æ‹¬å·ç»„åˆï¼Œå¹¶è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚


- **å®ç°æ€è·¯**ï¼š
  1. é¦–å…ˆå®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°check(st)ï¼Œç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²stæ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ‹¬å·ç»„åˆã€‚éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨cntï¼Œé‡åˆ°å·¦æ‹¬å·å¢åŠ è®¡æ•°ï¼Œé‡åˆ°å³æ‹¬å·å‡å°‘è®¡æ•°ï¼Œè‹¥å‡ºç°cntä¸ºè´Ÿæ•°ï¼Œæˆ–è€…éå†ç»“æŸåcntä¸ä¸º0ï¼Œåˆ™è¯´æ˜æ‹¬å·ä¸åŒ¹é…ï¼Œè¿”å›Falseï¼Œå¦åˆ™è¿”å›Trueã€‚

  2. åˆå§‹åŒ–ä¸€ä¸ªç©ºåˆ—è¡¨retï¼Œç”¨äºå­˜å‚¨ç»“æœã€‚

  3. åˆå§‹åŒ–ä¸€ä¸ªé›†åˆcurï¼Œåˆå§‹æ—¶å°†è¾“å…¥å­—ç¬¦ä¸²sä½œä¸ºå”¯ä¸€å…ƒç´ åŠ å…¥å…¶ä¸­ã€‚

  4. ä½¿ç”¨whileå¾ªç¯ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»“æœä¸ºæ­¢ï¼š

     - éå†é›†åˆcurä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºæœ‰æ•ˆæ‹¬å·ç»„åˆï¼Œè‹¥æ˜¯åˆ™å°†å…¶åŠ å…¥ç»“æœåˆ—è¡¨retã€‚

     - è‹¥ç»“æœåˆ—è¡¨retä¸ä¸ºç©ºï¼Œåˆ™è¯´æ˜å·²æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»“æœï¼Œç»“æŸå¾ªç¯ã€‚

     - å¦åˆ™ï¼Œåˆå§‹åŒ–ä¸€ä¸ªç©ºé›†åˆnxtï¼Œç”¨äºå­˜å‚¨ä¸‹ä¸€è½®è¿­ä»£çš„å€™é€‰å­—ç¬¦ä¸²é›†åˆã€‚

     - éå†é›†åˆcurä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œå°è¯•åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼ˆæ‹¬å·ï¼‰ï¼Œç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶åŠ å…¥nxtä¸­ã€‚

     - æ›´æ–°curä¸ºnxtï¼Œç»§ç»­ä¸‹ä¸€è½®è¿­ä»£ã€‚
  5. è¿”å›ç»“æœåˆ—è¡¨retã€‚

```py
class Solution:
    def removeInvalidParentheses(self, s: str) -> List[str]:
        ret = []
        def check(st):
            cnt=0
            for c in st:
                if c=='(':
                    cnt+=1
                elif c==')':
                    if cnt==0:
                        return False
                    cnt-=1
            return cnt==0
        cur = set([s])
        while True:
            for st in cur:
                if check(st):
                    ret.append(st)
            if len(ret):
                break
            nxt = set()
            for st in cur:
                for i in range(len(st)):
                    if i>0 and st[i]==st[i-1]:
                        continue
                    if st[i]=='(' or st[i]==')':
                        nxt.add(st[:i]+st[i+1:])
            cur = nxt
        return ret
```

## [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode.cn/problems/container-with-most-water/)

- é¢˜ç›®å¤§æ„ï¼šç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´æ•°æ•°ç»„`height`ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€æ¡å‚ç›´çº¿çš„é«˜åº¦ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸xè½´æ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚


- å®ç°æ€è·¯ï¼šä½¿ç”¨åŒæŒ‡é’ˆæ³•ã€‚åˆå§‹åŒ–å·¦æŒ‡é’ˆlæŒ‡å‘æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œå³æŒ‡é’ˆræŒ‡å‘æ•°ç»„çš„æœ«å°¾ä½ç½®ã€‚è®¾ç½®å˜é‡`ret`ç”¨äºè®°å½•å½“å‰æœ€å¤§å®¹é‡ï¼Œåˆå§‹åŒ–ä¸º`0`ã€‚åœ¨æ¯ä¸€è½®å¾ªç¯ä¸­ï¼Œè®¡ç®—å½“å‰å®¹å™¨çš„å®¹é‡ï¼Œå³`min(height[l], height[r])`ä¹˜ä»¥rå’Œlä¹‹é—´çš„è·ç¦»ï¼Œæ›´æ–°`ret`ã€‚ç„¶åæ ¹æ®æŒ‡é’ˆæ‰€æŒ‡å‘çš„é«˜åº¦çš„å¤§å°ï¼Œç§»åŠ¨æŒ‡é’ˆï¼Œå¦‚æœ`height[l]<height[r]`ï¼Œåˆ™ç§»åŠ¨å·¦æŒ‡é’ˆlå‘å³ä¸€æ­¥ï¼Œå¦åˆ™ç§»åŠ¨å³æŒ‡é’ˆrå‘å·¦ä¸€æ­¥ã€‚ç›´åˆ°å·¦å³æŒ‡é’ˆç›¸é‡ï¼Œå¾ªç¯ç»“æŸï¼Œè¿”å›retå³å¯ã€‚
  - æ­£ç¡®æ€§è¯æ˜ï¼š å¯¹äºå·¦å³ç«¯ç‚¹ $ l, r$ï¼Œ ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ä¸º$len = r-l+1-1$(å› ä¸ºä¸¤ä¸ªç‚¹ä¹‹é—´ç®—ä¸€æ®µï¼Œæ‰€ä»¥é•¿åº¦è¦å‡ä¸€)ï¼Œ$ ret = (r-l)*min(height[l], height[r])$,å‡è®¾ $height[l]<height[r]$, å¯¹äºå·¦ç«¯ç‚¹ï¼Œå…¶ä½œä¸ºæŸ±å­èƒ½å®¹çº³çš„æœ€å¤šçš„æ°´çš„æ•°é‡å·²ç»ä¸ºæœ€å¤§å€¼ï¼Œä»»æ„çš„ $l<x<r$ ä½œä¸ºå³ç«¯ç‚¹ä¸€å®šæ¯”$r$åšç«¯ç‚¹æ›´å·®ï¼Œæ‰€ä»¥å¯ä»¥æ’é™¤å·¦ç«¯ç‚¹$l$ï¼Œè®¡ç®—ä¸‹ä¸€ç‚¹å³$l+1$ã€‚ä»å·¦å³ç«¯ç‚¹å¼€å§‹ï¼Œå¯¹äºæ¯æ¬¡æ’é™¤çš„ç‚¹ï¼Œå·²ç»æ‰¾åˆ°è¿™ä¸ªç«¯ç‚¹å¯èƒ½çš„æœ€å¤§å€¼ï¼Œ æ‰€ä»¥å¯ä»¥ä¿è¯ç»“æœçš„æ­£ç¡®æ€§ã€‚

```py
class Solution:
    def maxArea(self, height: List[int]) -> int:
        l, r = 0, len(height)-1
        ret = 0
        while l<r:
            ret = max( ret, (r-l)*min(height[l], height[r]) )
            if height[l]<height[r]:
                l+=1
            elif height[l]>height[r]:
                r-=1
            else:
                l+=1
                r-=1
        return ret
```

## [647. å›æ–‡å­ä¸²](https://leetcode.cn/problems/palindromic-substrings/)

é¢˜ç›®å¤§æ„ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œç»Ÿè®¡å¹¶è¿”å›è¯¥å­—ç¬¦ä¸²ä¸­å›æ–‡å­ä¸²çš„æ•°ç›®ã€‚å›æ–‡å­—ç¬¦ä¸²æ˜¯æŒ‡æ­£ç€è¯»å’Œå€’è¿‡æ¥è¯»ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚å­å­—ç¬¦ä¸²æ˜¯å­—ç¬¦ä¸²ä¸­çš„ç”±è¿ç»­å­—ç¬¦ç»„æˆçš„ä¸€ä¸ªåºåˆ—ã€‚å³ä½¿æ˜¯ç”±ç›¸åŒå­—ç¬¦ç»„æˆçš„ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

å®ç°æ€è·¯ï¼šéå†å­—ç¬¦ä¸²sçš„æ‰€æœ‰å¯èƒ½çš„ä¸­å¿ƒä½ç½®ï¼Œå¯¹äºæ¯ä¸ªä¸­å¿ƒä½ç½®ï¼Œå‘ä¸¤è¾¹æ‰©å±•ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ä¸²ã€‚åœ¨æ‰©å±•çš„è¿‡ç¨‹ä¸­ï¼Œæ¯å½“å‘ç°ä¸€ä¸ªå›æ–‡å­ä¸²ï¼Œå°±å°†è®¡æ•°å™¨åŠ 1ã€‚æœ€ç»ˆè¿”å›è®¡æ•°å™¨çš„å€¼å³å¯ã€‚

```py
class Solution:
    def countSubstrings(self, s: str) -> int:
        n = len(s)
        ans = 0
        for i in range(2*n - 1):
            l, r = i//2, i//2 + (i&1)
            while l>=0 and r<n and s[l]==s[r]:
                l-=1; r+=1
                ans+=1
        return ans
```

## [93. å¤åŸ IP åœ°å€](https://leetcode.cn/problems/restore-ip-addresses/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²sï¼Œè¡¨ç¤ºä¸€ä¸ªIPåœ°å€ï¼Œè¦æ±‚è¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆIPåœ°å€ï¼Œå³æ¯ä¸ªIPåœ°å€ç”±å››ä¸ªæ•´æ•°ç»„æˆï¼ˆæ¯ä¸ªæ•´æ•°ä½äº0åˆ°255ä¹‹é—´ï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨'.'åˆ†éš”ã€‚ä¸èƒ½é‡æ–°æ’åºæˆ–åˆ é™¤sä¸­çš„ä»»ä½•æ•°å­—ï¼Œå¯ä»¥æŒ‰ä»»ä½•é¡ºåºè¿”å›ç­”æ¡ˆã€‚

**å®ç°æ€è·¯**ï¼šä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç®—æ³•ï¼Œé€’å½’åœ°æœç´¢æ‰€æœ‰å¯èƒ½çš„IPåœ°å€ç»„åˆã€‚åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆç¡®å®šæ¯ä¸ªæ•´æ•°çš„èŒƒå›´ï¼Œç„¶åéå†å¯èƒ½çš„æ•°å­—ç»„åˆï¼Œé€æ­¥æ„å»ºIPåœ°å€ã€‚é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯å·²ç»æ‰¾åˆ°äº†å››ä¸ªæ•´æ•°å¹¶ä¸”å·²ç»éå†å®Œäº†æ•´ä¸ªå­—ç¬¦ä¸²sã€‚

```py
class Solution:
    def restoreIpAddresses(self, s: str) -> List[str]:
        n = len(s)
        res, addr = [], ['0']*4

        def dfs(i, start):
            if i==4 or start==n:
                if i==4 and start==n:
                    res.append('.'.join(addr))
                return 
            if s[start]=='0':
                addr[i] = '0'
                dfs(i+1, start+1)
                return 
            num = 0
            for end in range(start, n):
                num = num*10 + int(s[end])
                if num in range(256):
                    addr[i] = str(num)
                    dfs(i+1, end+1)

        dfs(0, 0)           
        return res
```

## [538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘](https://leetcode.cn/problems/convert-bst-to-greater-tree/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äºè¯¥èŠ‚ç‚¹å€¼çš„èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

```py
class Solution:
    def convertBST(self, root: Optional[TreeNode]) -> Optional[TreeNode]:
        s = 0
        def dfs(r):
            nonlocal s
            if not r:
                return 0
            dfs(r.right)
            s += r.val
            r.val = s 
            dfs(r.left)
        dfs(root)
        return root
```

**å®ç°æ€è·¯**ï¼š**(Morris éå†)**ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé‡‡ç”¨åå‘ä¸­åºéå†ï¼ˆå³-æ ¹-å·¦ï¼‰çš„æ–¹å¼è¿›è¡Œéå†ã€‚åˆ©ç”¨ä¸€ä¸ªå˜é‡ s è®°å½•ç´¯åŠ å’Œï¼Œåˆå§‹å€¼ä¸º 0ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆåˆ¤æ–­å…¶æ˜¯å¦å­˜åœ¨å³å­èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶å€¼åŠ ä¸Šç´¯åŠ å’Œå¹¶æ›´æ–°ç´¯åŠ å’Œï¼Œç„¶åå°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å…¶å·¦å­èŠ‚ç‚¹ï¼›å¦‚æœå­˜åœ¨å³å­èŠ‚ç‚¹ï¼Œåˆ™æ‰¾åˆ°å…¶ä¸­åºéå†çš„åç»§èŠ‚ç‚¹ï¼Œå³å³å­æ ‘ä¸­æœ€å·¦è¾¹çš„èŠ‚ç‚¹ã€‚å¦‚æœåç»§èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜è¿˜æœªå¤„ç†è¿‡è¯¥èŠ‚ç‚¹ï¼Œåˆ™å°†åç»§èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å…¶å³å­èŠ‚ç‚¹ï¼›å¦‚æœåç»§èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜å·²ç»å¤„ç†è¿‡è¯¥èŠ‚ç‚¹ï¼Œåˆ™å°†åç»§èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ç½®ä¸ºç©ºï¼Œå°†å½“å‰èŠ‚ç‚¹çš„å€¼åŠ ä¸Šç´¯åŠ å’Œå¹¶æ›´æ–°ç´¯åŠ å’Œï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å…¶å·¦å­èŠ‚ç‚¹ã€‚æœ€åè¿”å›æ ¹èŠ‚ç‚¹ã€‚

```py
class Solution:
    def convertBST(self, root: Optional[TreeNode]) -> Optional[TreeNode]:
        def getSucc(node):
            succ = node.right
            while succ.left and succ.left!=node:
                succ = succ.left
            return succ

        newRoot = root
        s = 0
        while root:
            if not root.right:
                s += root.val
                root.val = s 
                root = root.left
            else:
                succ = getSucc(root)
                if not succ.left:
                    succ.left = root
                    root = root.right
                else:
                    succ.left = None
                    s += root.val
                    root.val = s 
                    root = root.left
        return newRoot
```

### [15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode.cn/problems/3sum/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k`ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0`ã€‚è¿”å›æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**å®ç°æ€è·¯**ï¼šé¦–å…ˆå¯¹æ•°ç»„ `nums` è¿›è¡Œæ’åºã€‚ç„¶åéå†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´  `nums[i]`ï¼Œè®¾å®šä¸¤ä¸ªæŒ‡é’ˆ `l` å’Œ `r` åˆ†åˆ«æŒ‡å‘ `i+1` å’Œæ•°ç»„æœ«å°¾ã€‚åœ¨ `l` å’Œ `r` ä¹‹é—´å¯»æ‰¾å’Œä¸º `0` çš„ä¸¤ä¸ªæ•°ã€‚å…·ä½“åœ°ï¼Œå¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè·³è¿‡ï¼›å¦‚æœå½“å‰å…ƒç´ ä¸ `l+1` å¤„çš„å…ƒç´ ç›¸åŒï¼Œè·³è¿‡ï¼›åœ¨ `l` å’Œ r ä¹‹é—´åˆ©ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œå¦‚æœæ‰¾åˆ°äº†æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ï¼Œåˆ™æ·»åŠ åˆ°ç»“æœä¸­ã€‚æœ€åè¿”å›ç»“æœåˆ—è¡¨ `res`ã€‚

```py
class Solution:
    def threeSum(self, nums: List[int]) -> List[List[int]]:
        n = len(nums)
        nums.sort()
        res = []
        for i in range(n):
            l = i 
            r = n-1
            if i and nums[i]==nums[i-1]:
                continue
            for m in range(l+1, n):
                if m>l+1 and nums[m]==nums[m-1]:
                    continue
                while r>m and nums[r]+nums[m]+nums[l]>0:
                    r-=1
                if m==r: break
                if nums[r]+nums[m]+nums[l]==0:
                    res.append([nums[l], nums[m], nums[r]])
        return res
```

**å®ç°æ€è·¯**ï¼šé¦–å…ˆï¼Œåˆ©ç”¨ `Counter` å‡½æ•°ç»Ÿè®¡æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æœ‰ 0 å‡ºç°è‡³å°‘ä¸‰æ¬¡ï¼Œå¦‚æœæ˜¯åˆ™å°† `[0, 0, 0]` æ·»åŠ åˆ°ç»“æœä¸­ã€‚ç„¶åï¼Œå¯¹ä¸é‡å¤çš„æ•°è¿›è¡Œæ’åºã€‚éå†æ’åºåçš„æ•°ï¼Œå¯¹äºæ¯ä¸ªæ•° numï¼Œå¦‚æœ num ä¸ç­‰äº 0 ä¸” num å‡ºç°æ¬¡æ•°å¤§äº 1 ä¸” `-num*2` ä¹Ÿåœ¨ Counter ä¸­ï¼Œåˆ™å°† `[num, num, -num*2]` æ·»åŠ åˆ°ç»“æœä¸­ã€‚ç„¶åï¼Œåœ¨è´Ÿæ•°éƒ¨åˆ†ï¼Œåˆ©ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„ä¸¤ä¸ªæ•°ã€‚æœ€åè¿”å›ç»“æœåˆ—è¡¨ `res`ã€‚

```py
class Solution:
    def threeSum(self, nums: List[int]) -> List[List[int]]:
        res = []
        c = Counter(nums)
        if 0 in c and c[0] >= 3:
            res.append([0,0,0])
        no_repeat_nums = sorted(c.keys())
        
        for i,num in enumerate(no_repeat_nums):
            if num != 0 and c[num] > 1 and -num*2 in c:
                res.append([num,num,-num*2])
            if num < 0:
                for num3 in no_repeat_nums[ bisect_left(no_repeat_nums,((-num+1)/2)) : bisect_right(no_repeat_nums,-num*2-1) ]:
                    num2 = -num-num3
                    if num2 in c:
                        res.append([num,num2,num3])
        return res
```

## [494. ç›®æ ‡å’Œ](https://leetcode.cn/problems/target-sum/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target`ï¼Œé€šè¿‡ç»™æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  '+' æˆ– '-'ï¼Œç„¶åä¸²è”èµ·æ¥æ„é€ è¡¨è¾¾å¼ï¼Œè¿”å›å¯ä»¥æ„é€ çš„è¡¨è¾¾å¼æ•°ç›®ï¼Œä½¿å…¶è¿ç®—ç»“æœç­‰äºç›®æ ‡æ•°ã€‚

#### è®°å¿†åŒ–æœç´¢

**å®ç°æ€è·¯**ï¼šè¿™ä¸ªé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºä¸€ä¸ªèƒŒåŒ…é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºåœ¨æ•°ç»„ä¸­é€‰å–ä¸€äº›æ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œç­‰äº `target`ã€‚å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° `dfs(i, s)`ï¼Œè¡¨ç¤ºåœ¨æ•°ç»„ `nums` ä¸­è€ƒè™‘ç¬¬ i ä¸ªæ•°ï¼Œä½¿å¾—ç›®å‰çš„å’Œä¸º `s` çš„è¡¨è¾¾å¼æ•°ç›®ã€‚é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯éå†å®Œæ‰€æœ‰æ•°ï¼Œå¦‚æœ `s` ç­‰äº `0`ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†ä¸€ç§æ„é€ æ–¹å¼ï¼Œè¿”å› `1`ï¼Œå¦åˆ™è¿”å› `0`ã€‚é€’å½’è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ `s` å°äºå½“å‰æ•° `nums[i]`ï¼Œè¯´æ˜æ— æ³•é€‰å–å½“å‰æ•°ï¼Œç›´æ¥è·³è¿‡ï¼›å¦åˆ™ï¼Œé€’å½’è€ƒè™‘é€‰å–å½“å‰æ•°å’Œä¸é€‰å–å½“å‰æ•°ä¸¤ç§æƒ…å†µã€‚åˆ©ç”¨ç¼“å­˜è£…é¥°å™¨ `@cache` å¯ä»¥å°†é‡å¤è®¡ç®—çš„ç»“æœè¿›è¡Œç¼“å­˜ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚æœ€åè¿”å› `dfs(0, target)` å³å¯å¾—åˆ°ç»“æœã€‚

```py
class Solution:
    def findTargetSumWays(self, nums: List[int], target: int) -> int:
        target += sum(nums)
        if target<0 or target&1:
            return 0
        target//=2
        @cache
        def dfs(i, s):
            if i==len(nums):
                return 1 if s==0 else 0
            if s<nums[i]:
                return dfs(i+1, s)
            else:
                return dfs(i+1, s) + dfs(i+1, s-nums[i])
        return dfs(0, target)


        
```

#### åŠ¨æ€è§„åˆ’

**å®ç°æ€è·¯**ï¼šè¿™é‡Œé‡‡ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚é¦–å…ˆå°†ç›®æ ‡æ•° `target` åŠ ä¸Šæ•°ç»„ `nums` çš„æ€»å’Œï¼Œå¦‚æœæ€»å’Œä¸ºè´Ÿæ•°æˆ–è€…æ˜¯å¥‡æ•°ï¼Œåˆ™æ— æ³•é€šè¿‡è°ƒæ•´ç¬¦å·å¾—åˆ°ç›®æ ‡æ•°ï¼Œç›´æ¥è¿”å› `0`ã€‚å¦åˆ™ï¼Œå°†ç›®æ ‡æ•°é™¤ä»¥ `2`ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ `f`ï¼Œå…¶ä¸­ `f[i][j]` è¡¨ç¤ºåœ¨è€ƒè™‘å‰ `i` ä¸ªæ•°æ—¶ï¼Œæ„é€ å’Œä¸º `j` çš„è¡¨è¾¾å¼çš„æ•°ç›®ã€‚åˆå§‹åŒ– `f[0][0] = 1`ã€‚ç„¶åï¼Œéå†æ•°ç»„ `nums`ï¼Œå¹¶ä¸”æ›´æ–° `f[i][j]`ã€‚å½“ j å°äºå½“å‰æ•° `nums[i-1]` æ—¶ï¼Œè¡¨ç¤ºæ— æ³•é€‰å–å½“å‰æ•°ï¼Œåˆ™ `f[i][j]` ç­‰äºä¸Šä¸€ä¸ªçŠ¶æ€çš„å€¼ï¼›å½“ `j` å¤§äºç­‰äºå½“å‰æ•° `nums[i-1]` æ—¶ï¼Œå¯ä»¥é€‰æ‹©åŠ ä¸Šæˆ–å‡å»å½“å‰æ•°ï¼Œåˆ™ `f[i][j]` ç­‰äºä¸Šä¸€ä¸ªçŠ¶æ€åŠ ä¸Šä¸é€‰å–å½“å‰æ•°çš„å€¼ä»¥åŠä¸Šä¸€ä¸ªçŠ¶æ€åŠ ä¸Šé€‰å–å½“å‰æ•°çš„å€¼ã€‚æœ€åè¿”å› `f[n][target]`ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ `nums` çš„é•¿åº¦ã€‚

```py
class Solution:
    def findTargetSumWays(self, nums: List[int], target: int) -> int:
        target+=sum(nums)
        if target<0 or target%2:
            return 0
        target//=2

        n = len(nums)
        f = [[0]*(target+1) for _ in range(n+1)]
        f[0][0] = 1
        for i in range(1, n+1):
            for j in range(target+1):
                if j<nums[i-1]:
                    f[i][j] = f[i-1][j]
                else:
                    f[i][j] = f[i-1][j] + f[i-1][j-nums[i-1]]
        return f[n][target]
```

## [581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„](https://leetcode.cn/problems/shortest-unsorted-continuous-subarray/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæ‰¾å‡ºä¸€ä¸ªè¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—å¯¹è¯¥å­æ•°ç»„è¿›è¡Œå‡åºæ’åºåï¼Œæ•´ä¸ªæ•°ç»„éƒ½å˜ä¸ºå‡åºæ’åºã€‚è¦æ±‚æ‰¾å‡ºç¬¦åˆé¢˜æ„çš„æœ€çŸ­å­æ•°ç»„ï¼Œå¹¶è¾“å‡ºå…¶é•¿åº¦ã€‚

**å®ç°æ€è·¯**ï¼šä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆleftå’Œrightï¼Œåˆå§‹åŒ–ä¸º-1ï¼Œéå†æ•°ç»„numsã€‚é¦–å…ˆï¼Œä»å·¦åˆ°å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ— åºçš„å…ƒç´ ï¼Œå³å½“å‰å…ƒç´ å°äºå‰é¢å·²éå†è¿‡çš„æœ€å¤§å…ƒç´ ï¼Œæ­¤æ—¶æ›´æ–°rightæŒ‡é’ˆä¸ºå½“å‰ä½ç½®iï¼›ç„¶åï¼Œä»å³åˆ°å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ— åºçš„å…ƒç´ ï¼Œå³å½“å‰å…ƒç´ å¤§äºåé¢å·²éå†è¿‡çš„æœ€å°å…ƒç´ ï¼Œæ­¤æ—¶æ›´æ–°leftæŒ‡é’ˆä¸ºå½“å‰ä½ç½®n-i-1ã€‚æœ€ç»ˆè¿”å›right-left+1å³ä¸ºæœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„çš„é•¿åº¦ã€‚

```py
class Solution:
    def findUnsortedSubarray(self, nums: List[int]) -> int:
        n = len(nums)
        ma, right = -inf, -1
        mi, left = inf, -1

        for i in range(n):
            if ma>nums[i]:
                right = i
            else:
                ma = nums[i]
                
            if mi<nums[n-i-1]:
                left = n-i-1
            else:
                mi = nums[n-i-1]
        return 0 if right==-1 else right-left+1
```



## [416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode.cn/problems/partition-equal-subset-sum/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªéç©ºæ•°ç»„ numsï¼Œæ•°ç»„ä¸­åªåŒ…å«æ­£æ•´æ•°ã€‚è¦æ±‚åˆ¤æ–­æ˜¯å¦èƒ½å°†è¯¥æ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚

**å®ç°æ€è·¯**ï¼š

1. é¦–å…ˆè®¡ç®—æ•°ç»„ nums çš„æ€»å’Œ sã€‚
2. å¦‚æœæ€»å’Œ s ä¸ºå¥‡æ•°ï¼Œé‚£ä¹ˆæ— æ³•åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ï¼Œç›´æ¥è¿”å› Falseã€‚
3. å¦‚æœæ•°ç»„ä¸­çš„æœ€å¤§å€¼å¤§äºæ€»å’Œçš„ä¸€åŠï¼Œåˆ™æ— æ³•åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ï¼Œç›´æ¥è¿”å› Falseã€‚
4. åˆå§‹åŒ–ä¸€ä¸ªå¤§å°ä¸ºæ€»å’Œä¸€åŠåŠ ä¸€çš„å¸ƒå°”æ•°ç»„ fï¼Œf[i] è¡¨ç¤ºæ˜¯å¦å­˜åœ¨å­é›†çš„å’Œä¸º iã€‚
5. å°† f[0] åˆå§‹åŒ–ä¸º Trueï¼Œè¡¨ç¤ºå­é›†çš„å’Œä¸º 0ã€‚
6. éå†æ•°ç»„ numsï¼Œå¯¹äºæ¯ä¸ªæ­£æ•´æ•° numï¼Œä»æ€»å’Œä¸€åŠå¼€å§‹å‘å‰éå†ï¼Œæ›´æ–°æ•°ç»„ fï¼Œå¦‚æœ f[j-num] ä¸º Trueï¼Œåˆ™è¯´æ˜å­˜åœ¨ä¸€ä¸ªå­é›†çš„å’Œä¸º j-numï¼ŒåŠ ä¸Šå½“å‰çš„ num åï¼Œå’Œä¸º jï¼Œå› æ­¤ f[j] ä¹Ÿä¸º Trueã€‚
7. æœ€ç»ˆè¿”å› f[s//2]ï¼Œè¡¨ç¤ºæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­é›†çš„å’Œä¸ºæ€»å’Œä¸€åŠï¼Œå³æ˜¯å¦èƒ½åˆ†å‰²æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ã€‚

```py
class Solution:
    def canPartition(self, nums: List[int]) -> bool:
        s = sum(nums)
        if s&1: return False
        ma = max(nums)
        t = s//2
        if ma>t: return False

        n = len(nums)
        f = [False]*(t+1)
        f[0] = True
        for i, num in enumerate(nums):
            for j in range(t, num-1, -1):
                f[j] |= f[j-num]
        return f[t]
```

## [394. å­—ç¬¦ä¸²è§£ç ](https://leetcode.cn/problems/decode-string/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ç¼–ç è§„åˆ™ä¸º`k[encoded_string]`ï¼Œè¡¨ç¤º`encoded_string`ä¸­çš„å†…å®¹é‡å¤kæ¬¡ã€‚è¦æ±‚è§£ç è¯¥å­—ç¬¦ä¸²ã€‚

**å®ç°æ€è·¯**ï¼šä½¿ç”¨é€’å½’æ¥è§£ç å­—ç¬¦ä¸²ã€‚éå†è¾“å…¥å­—ç¬¦ä¸²ï¼Œæ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œå¤„ç†ï¼š

1. è‹¥é‡åˆ°æ•°å­—ï¼Œåˆ™ç´¯åŠ æ•°å­—ç›´è‡³é‡åˆ°éæ•°å­—å­—ç¬¦ã€‚
2. è‹¥é‡åˆ°å­—æ¯ï¼Œåˆ™ç›´æ¥åŠ å…¥å½“å‰è§£ç çš„å­—ç¬¦ä¸²ä¸­ã€‚
3. è‹¥é‡åˆ°å·¦æ‹¬å·'['ï¼Œåˆ™é€’å½’è°ƒç”¨è§£ç å‡½æ•°ï¼Œå¤„ç†æ‹¬å·å†…çš„å†…å®¹ï¼Œç›´è‡³é‡åˆ°å³æ‹¬å·']'ã€‚å°†æ‹¬å·å†…çš„è§£ç ç»“æœä¹˜ä»¥å‰é¢ç´¯ç§¯çš„æ•°å­—ï¼Œå¹¶åŠ å…¥å½“å‰è§£ç çš„å­—ç¬¦ä¸²ä¸­ã€‚
4. è‹¥é‡åˆ°å³æ‹¬å·']'ï¼Œåˆ™è¿”å›å½“å‰è§£ç çš„å­—ç¬¦ä¸²å’Œå½“å‰ç´¢å¼•ã€‚
5. è¿”å›æœ€ç»ˆè§£ç ç»“æœã€‚

```py
class Solution:
    def decodeString(self, s: str) -> str:
        def decode(i, n):
            cur = ""; num = 0
            while i<len(s):
                if s[i].isdigit():
                    num = num*10 + int(s[i])
                elif s[i].isalpha():
                    cur += s[i]
                elif s[i] == '[':
                    ns, ni = decode(i+1, num) # next str, next index
                    cur += ns; i = ni
                    num = 0
                elif s[i]==']':
                    return cur*n, i
                i += 1
            return cur*n, i 
        res, _ = decode(0, 1)
        return res
```

## [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/)

**é¢˜ç›®å¤§æ„**ï¼š
ç»™å®šä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œæ±‚é€šè¿‡æ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢å­—ç¬¦ï¼Œå°† word1 è½¬æ¢æˆ word2 æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ã€‚

#### è®°å¿†åŒ–æœç´¢

è¿™æ®µä»£ç ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼æ±‚è§£ï¼Œå…¶ä¸­ dfs å‡½æ•°è¡¨ç¤ºå°† s çš„å‰ i ä¸ªå­—ç¬¦è½¬æ¢ä¸º t çš„å‰ j ä¸ªå­—ç¬¦æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ã€‚é€’å½’çš„åŸºæœ¬æƒ…å†µæ˜¯å½“ i å°äº 0 æ—¶ï¼Œè¡¨ç¤º s å·²ç»éå†å®Œï¼Œéœ€è¦æ’å…¥ t çš„å‰ j+1 ä¸ªå­—ç¬¦ï¼›å½“ j å°äº 0 æ—¶ï¼Œè¡¨ç¤º t å·²ç»éå†å®Œï¼Œéœ€è¦åˆ é™¤ s çš„å‰ i+1 ä¸ªå­—ç¬¦ï¼›å½“ s[i] ç­‰äº t[j] æ—¶ï¼Œä¸éœ€è¦é¢å¤–æ“ä½œï¼Œç›´æ¥é€’å½’å¤„ç† i-1 å’Œ j-1ï¼›å½“ s[i] ä¸ç­‰äº t[j] æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢æ“ä½œï¼Œé€‰æ‹©æ“ä½œæ•°æœ€å°çš„æ–¹æ¡ˆã€‚é€’å½’çš„è¿‡ç¨‹ä¸­åˆ©ç”¨äº†ç¼“å­˜è£…é¥°å™¨ @cache æ¥æé«˜æ•ˆç‡ã€‚

```py
class Solution:
    def minDistance(self, s: str, t: str) -> int:
        n, m = len(s), len(t)
        @cache
        def dfs(i, j):
            if i<0: return j+1
            if j<0: return i+1
            if s[i]==t[j]: return dfs(i-1, j-1)
            return min(dfs(i-1, j), dfs(i, j-1), dfs(i-1, j-1)) + 1
        return dfs(n-1, m-1)
```

#### é€’æ¨

**å®ç°æ€è·¯**ï¼š
å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ fï¼Œå…¶ä¸­ f[i][j] è¡¨ç¤ºå°† word1 çš„å‰ i ä¸ªå­—ç¬¦è½¬æ¢ä¸º word2 çš„å‰ j ä¸ªå­—ç¬¦æ‰€éœ€çš„æœ€å°‘æ“ä½œæ•°ã€‚åˆå§‹æ—¶ï¼Œf[i][0] è¡¨ç¤ºå°† word1 çš„å‰ i ä¸ªå­—ç¬¦å…¨éƒ¨åˆ é™¤ï¼Œéœ€è¦çš„æ“ä½œæ•°ä¸º iï¼Œè€Œ `f[0][j]` è¡¨ç¤ºå°† word2 çš„å‰ j ä¸ªå­—ç¬¦å…¨éƒ¨æ’å…¥åˆ° word1 ä¸­ï¼Œéœ€è¦çš„æ“ä½œæ•°ä¸º jã€‚
ç„¶åï¼Œæ ¹æ®åŠ¨æ€è§„åˆ’çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œé€æ­¥è®¡ç®— f[i][j] çš„å€¼ã€‚è‹¥ word1[i] ç­‰äº word2[j]ï¼Œåˆ™ f[i][j] ç­‰äº f[i-1][j-1]ï¼Œå³ä¸éœ€è¦é¢å¤–æ“ä½œï¼›è‹¥ä¸ç›¸ç­‰ï¼Œåˆ™å¯ä»¥è€ƒè™‘æ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢æ“ä½œï¼Œé€‰æ‹©æ“ä½œæ•°æœ€å°çš„æ–¹æ¡ˆã€‚æœ€ç»ˆï¼Œè¿”å› f[n][m]ï¼Œå…¶ä¸­ n å’Œ m åˆ†åˆ«ä¸º word1 å’Œ word2 çš„é•¿åº¦ã€‚

```py
class Solution:
    def minDistance(self, s: str, t: str) -> int:
        n, m = len(s), len(t)
        f = [[0]*(m+1) for _ in range(n+1)]
        f[0] = list(range(m+1)) # f[0][j] = j
        for i in range(n):
            f[i+1][0] = i+1
            for j in range(m):
                if s[i]==t[j]:
                    f[i+1][j+1] = f[i][j]
                else:
                    f[i+1][j+1] = min(f[i][j+1], f[i+1][j], f[i][j]) + 1

        return f[n][m]
```

## [96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/)



```py
class Solution:
    def numTrees(self, n: int) -> int:
        f = [0]*(n+1)
        f[0] = 1; f[1] = 1
        for i in range(2, n+1):
            for j in range(1, i+1):
                f[i] += f[i-j]*f[j-1]
        return f[n]
```





## [160. ç›¸äº¤é“¾è¡¨](https://leetcode.cn/problems/intersection-of-two-linked-lists/)



```py
class Solution:
    def getIntersectionNode(self, headA: ListNode, headB: ListNode) -> Optional[ListNode]:
        l1, l2 = headA, headB
        while l1 != l2:
            l1 = headB if not l1 else l1.next
            l2 = headA if not l2 else l2.next
        return l1
```

## [31. ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œè¦æ±‚æ‰¾å‡ºè¿™ä¸ªæ•°ç»„çš„ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œå³æ¯”å½“å‰æ’åˆ—å¤§çš„ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›å­—å…¸åºæœ€å°çš„æ’åˆ—ã€‚

**å®ç°æ€è·¯**ï¼šè¦æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. ä»æ•°ç»„æœ«å°¾å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç›¸é‚»çš„ä¸¤ä¸ªæ•°ï¼Œæ»¡è¶³ nums[i] < nums[i+1]ã€‚
2. å¦‚æœæ‰¾åˆ°äº†è¿™æ ·çš„ä¸€å¯¹æ•°ï¼Œè¯´æ˜å½“å‰æ’åˆ—è¿˜ä¸æ˜¯æœ€å¤§çš„æ’åˆ—ï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚
3. åœ¨ä»å³å¾€å·¦æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªä½ç½®è®°ä¸º iï¼Œå†ä»æ•°ç»„æœ«å°¾å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äº nums[i] çš„æ•°ï¼Œè®°ä¸º jã€‚
4. äº¤æ¢ nums[i] å’Œ nums[j]ã€‚
5. å°†ä» i+1 ä½ç½®å¼€å§‹åˆ°æ•°ç»„æœ«å°¾çš„æ•°é€†åºæ’åˆ—ï¼Œä»¥å¾—åˆ°å­—å…¸åºæœ€å°çš„æ’åˆ—ã€‚
6. å¦‚æœæ­¥éª¤1ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸é‚»çš„ä¸¤ä¸ªæ•°ï¼Œåˆ™è¯´æ˜å½“å‰æ’åˆ—å·²ç»æ˜¯æœ€å¤§çš„æ’åˆ—ï¼Œç›´æ¥å°†æ•´ä¸ªæ•°ç»„é€†åºæ’åˆ—å³å¯ã€‚

```py
class Solution:
    def nextPermutation(self, nums: List[int]) -> None:
        """
        Do not return anything, modify nums in-place instead.
        """
        n = len(nums)
        i = n-2
        while i>=0 and nums[i] >= nums[i+1]:
            i-=1
        
        if i>=0:
            j = n-1
            while j>=i and nums[j] <= nums[i]:
                j-=1
            nums[i], nums[j] = nums[j], nums[i]

        nums[i+1:] = reversed(nums[i+1:])

```

## [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode.cn/problems/search-in-rotated-sorted-array/)

**é¢˜ç›®å¤§æ„**ï¼š
ç»™å®šä¸€ä¸ªæŒ‰å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œæ•°ç»„ä¸­çš„å€¼äº’ä¸ç›¸åŒã€‚è¯¥æ•°ç»„ç»è¿‡æœªçŸ¥çš„æŸä¸ªä¸‹æ ‡æ—‹è½¬ï¼Œå³åŸæœ¬æ’åœ¨æ•°ç»„å¼€å¤´çš„ä¸€éƒ¨åˆ†å…ƒç´ è¢«ç§»åŠ¨åˆ°æ•°ç»„æœ«å°¾ã€‚ç»™å®šä¸€ä¸ªç›®æ ‡å€¼ `target`ï¼Œå¦‚æœè¯¥ç›®æ ‡å€¼å­˜åœ¨äºæ—‹è½¬åçš„æ•°ç»„ä¸­ï¼Œåˆ™è¿”å›å…¶ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚è¦æ±‚è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**å®ç°æ€è·¯**ï¼š

1. ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä»¥æ»¡è¶³ O(log n) çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚ã€‚
2. åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ `l` å’Œ `r` åˆ†åˆ«æŒ‡å‘æ•°ç»„çš„é¦–å°¾å…ƒç´ ã€‚
3. åœ¨å¾ªç¯ä¸­ï¼Œè®¡ç®—ä¸­é—´ä½ç½® `mid`ï¼Œåˆ¤æ–­ `nums[mid]` æ˜¯å¦ç­‰äºç›®æ ‡å€¼ `target`ï¼Œè‹¥æ˜¯åˆ™ç›´æ¥è¿”å› `mid`ã€‚
4. è‹¥ `nums[0] <= nums[mid]`ï¼Œè¯´æ˜å·¦åŠæ®µæ˜¯æœ‰åºçš„ï¼Œæ­¤æ—¶åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å·¦åŠæ®µèŒƒå›´å†…ï¼Œè‹¥æ˜¯åˆ™å°†å³æŒ‡é’ˆç§»åˆ° `mid-1`ï¼Œå¦åˆ™å°†å·¦æŒ‡é’ˆç§»åˆ° `mid+1`ã€‚
5. è‹¥ `nums[0] > nums[mid]`ï¼Œè¯´æ˜å³åŠæ®µæ˜¯æœ‰åºçš„ï¼Œæ­¤æ—¶åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å³åŠæ®µèŒƒå›´å†…ï¼Œè‹¥æ˜¯åˆ™å°†å·¦æŒ‡é’ˆç§»åˆ° `mid+1`ï¼Œå¦åˆ™å°†å³æŒ‡é’ˆç§»åˆ° `mid-1`ã€‚
6. è‹¥å¾ªç¯ç»“æŸä»æœªæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œåˆ™è¿”å› -1ã€‚

```py
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        if not nums: return -1
        n = len(nums)
        l, r = 0, n-1
        while l<=r:
            mid = l+r>>1
            if nums[mid]==target:
                return mid
            if nums[0]<=nums[mid]:
                if nums[0] <= target < nums[mid]:
                    r = mid-1
                else:
                    l = mid+1
            else:
                if nums[mid] < target <= nums[n-1]:
                    l = mid+1
                else:
                    r = mid-1
        return -1
```

## [19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¦æ±‚åˆ é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚

**å®ç°æ€è·¯**ï¼šä½¿ç”¨åŒæŒ‡é’ˆï¼Œé¦–å…ˆè®©ç¬¬ä¸€ä¸ªæŒ‡é’ˆä»å¤´èŠ‚ç‚¹å¼€å§‹å‘åç§»åŠ¨næ­¥ï¼Œç„¶ååŒæ—¶ç§»åŠ¨ç¬¬ä¸€ä¸ªæŒ‡é’ˆå’Œç¬¬äºŒä¸ªæŒ‡é’ˆï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªæŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾ã€‚è¿™æ ·ç¬¬äºŒä¸ªæŒ‡é’ˆæ‰€æŒ‡çš„ä½ç½®å°±æ˜¯å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œåˆ é™¤æ“ä½œå³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¦è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚é“¾è¡¨é•¿åº¦ä¸º1ï¼Œåˆ é™¤å¤´èŠ‚ç‚¹ç­‰æƒ…å†µã€‚

```py
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def removeNthFromEnd(self, head: Optional[ListNode], n: int) -> Optional[ListNode]:
        if not head.next:
            return None

        p1 = head
        n-=1
        while n:
            p1 = p1.next
            n-=1
        
        pre = p2 = head
        while p1.next:
            p1 = p1.next
            pre = p2
            p2 = p2.next
        
        if p2==head:
            head = head.next
        else:
            pre.next = pre.next.next
        
        return head
```

## [148. æ’åºé“¾è¡¨](https://leetcode.cn/problems/sort-list/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹headï¼Œè¦æ±‚å°†é“¾è¡¨æŒ‰å‡åºæ’åˆ—ï¼Œå¹¶è¿”å›æ’åºåçš„é“¾è¡¨ã€‚

**å®ç°æ€è·¯**ï¼š

1. ä½¿ç”¨å½’å¹¶æ’åºçš„æ€æƒ³å¯¹é“¾è¡¨è¿›è¡Œæ’åºã€‚
2. ç¼–å†™é€’å½’å‡½æ•°sortFun(head, tail)ï¼Œå…¶ä¸­headè¡¨ç¤ºå½“å‰å¾…æ’åºçš„å­é“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œtailè¡¨ç¤ºå½“å‰å¾…æ’åºçš„å­é“¾è¡¨çš„å°¾ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼ˆå³å°¾ç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼‰ã€‚
3. åœ¨sortFunå‡½æ•°ä¸­ï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°å½“å‰å¾…æ’åºå­é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹midï¼Œå¹¶å°†é“¾è¡¨åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹éƒ¨åˆ†ç”±headåˆ°mid-1ï¼Œå³è¾¹éƒ¨åˆ†ç”±midåˆ°tail-1ã€‚
4. é€’å½’è°ƒç”¨sortFunå‡½æ•°å¯¹å·¦å³ä¸¤éƒ¨åˆ†è¿›è¡Œæ’åºï¼Œç›´è‡³æ’åºå®Œæˆã€‚
5. ç¼–å†™mergeå‡½æ•°ï¼Œå°†å·²ç»æ’å¥½åºçš„å·¦å³ä¸¤éƒ¨åˆ†é“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œåˆå¹¶è¿‡ç¨‹ä¸­æŒ‰ç…§ç»“ç‚¹çš„å€¼å¤§å°è¿›è¡Œæ¯”è¾ƒï¼Œå°†è¾ƒå°çš„ç»“ç‚¹è¿æ¥åˆ°ç»“æœé“¾è¡¨ä¸­ã€‚
6. è¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚

```py
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def sortList(self, head: Optional[ListNode]) -> Optional[ListNode]:
        def sortFun(head, tail):
            if not head:
                return head
            if head.next == tail:
                head.next = None
                return head
            slow = fast = head

            while fast != tail:
                fast = fast.next
                slow = slow.next
                if fast != tail:
                    fast = fast.next
            
            mid = slow
            return merge(sortFun(head, mid), sortFun(mid, tail))
        def merge(h1, h2):
            dummy = ListNode(-1)
            cur = dummy
            while h1 and h2:
                if h1.val<=h2.val:
                    cur.next = h1
                    h1 = h1.next
                else:
                    cur.next = h2
                    h2 = h2.next
                cur = cur.next
            if h1:
                cur.next = h1
            if h2:
                cur.next = h2
            
            return dummy.next
        return sortFun(head, None)
```

[581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„](https://leetcode.cn/problems/shortest-unsorted-continuous-subarray/)

**é¢˜ç›®å¤§æ„**ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„numsï¼Œæ‰¾å‡ºä¸€ä¸ªè¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—å¯¹è¯¥å­æ•°ç»„è¿›è¡Œå‡åºæ’åºåï¼Œæ•´ä¸ªæ•°ç»„éƒ½å˜ä¸ºå‡åºæ’åºã€‚è¦æ±‚æ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„ï¼Œå¹¶è¾“å‡ºå…¶é•¿åº¦ã€‚

**å®ç°æ€è·¯**ï¼š

1. é¦–å…ˆåˆå§‹åŒ–æœ€å¤§å€¼mxä¸ºè´Ÿæ— ç©·ï¼Œæœ€å°å€¼mnä¸ºæ­£æ— ç©·ï¼Œä»¥åŠæœ€çŸ­å­æ•°ç»„çš„å·¦å³è¾¹ç•Œleftå’Œrightåˆ†åˆ«ä¸º-1ã€‚
2. éå†æ•°ç»„numsï¼Œä»å·¦å‘å³å¯»æ‰¾å³è¾¹ç•Œrightï¼Œå¦‚æœå½“å‰å…ƒç´ å°äºå‰é¢çš„æœ€å¤§å€¼mxï¼Œåˆ™æ›´æ–°rightä¸ºå½“å‰ç´¢å¼•ï¼›å¦åˆ™æ›´æ–°æœ€å¤§å€¼mxä¸ºå½“å‰å…ƒç´ ã€‚
3. åŒæ—¶ï¼Œä»å³å‘å·¦å¯»æ‰¾å·¦è¾¹ç•Œleftï¼Œå¦‚æœå½“å‰å…ƒç´ å¤§äºåé¢çš„æœ€å°å€¼mnï¼Œåˆ™æ›´æ–°leftä¸ºå½“å‰ç´¢å¼•ï¼›å¦åˆ™æ›´æ–°æœ€å°å€¼mnä¸ºå½“å‰å…ƒç´ ã€‚
4. æœ€åè¿”å›å³è¾¹ç•Œå’Œå·¦è¾¹ç•Œçš„å·®åŠ 1ï¼Œå³ä¸ºæœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ã€‚å¦‚æœå·¦è¾¹ç•Œä»ä¸ºåˆå§‹å€¼-1ï¼Œåˆ™è¿”å›0è¡¨ç¤ºæ•´ä¸ªæ•°ç»„å·²ç»æœ‰åºã€‚

```py
class Solution:
    def findUnsortedSubarray(self, nums: List[int]) -> int:
        n = len(nums)
        mx, right = -inf, -1
        mn, left = inf, -1

        for i in range(n):
            if mx>nums[i]:
                right = i 
            else:
                mx = nums[i]
            
            if mn<nums[n-1-i]:
                left = n-1-i 
            else:
                mn = nums[n-1-i]

        return 0 if left==-1 else right-left+1
```

