# 数据库学习笔记

![img](https://images.cnblogs.com/cnblogs_com/blogs/754708/galleries/2281309/t_230301105516_ty.png)

# 1、基本知识与关系模型

从思维的角度学习。

## 第一讲 初步认识数据库系统

### Table的构成和常用术语：

表名、表标题、（格式）、 表内容、 (行/元组/记录row/tuple/record)、(列/字段/属性/数据项column/field/attribute/data item)、关系。

### 数据库系统（DBS）

数据库系统由五个要素组成。

#### 1、数据库（DB)：

相互有关联关系的若干Table的集合。

#### 2、数据库管理系统(DBMS)

管理数据库的一种系统软件。

#### 3、数据库应用（DBAP)

管理数据库的应用程序。

#### 4、数据库管理员（DBA)

管理数据库的管理人员。

#### 5、计算机基本系统

基本计算机操作系统。

### **什么是数据库管理系统？**

**用户角度**：数据库定义(Definition功能，数据库操纵（Manipulation）功能，数据库控制(Control)功能

从而形成了数据库定义语言（DDL），数据操纵语言（DML）、数据控制语言（DCL）。联合起来则形成了SQL语言，结构化的数据库语言。数据库语言可以嵌入到高级语言中使用。

**系统角度**：“形式->构造->自动化”，即解析语言并执行的系统。

典型的数据库管理系统（DBMS）

- Oracle
- DB 2 （IBM）
- Sybase
- MS SQL Server
- MS Access
- MS Foxpro

## 第二讲  数据库系统的结构抽象与演变

DBMS管理数据的三个层次

**External Level = User Level**

某一用户能够看到与处理的数据，全局数据的某一部分。

**Conceptual Level = Logic level**

从全局角度理解/管理的数据，含相应的关联约束。

**Internal Level = Physical level** 

存储在介质上的数据，含存储路径，存储方式，索引方式等。

#### 模式（Schema）

对于数据库中数据所进行的一种结构性的描述所观察到的数据的结构信息。

#### 视图（View）/ 数据（Data）

某一种表现形式下表现出来的数据库中的数据。

#### 三级模式（三级视图）

**External Schema -- (External) View** 

某一用户能够看到与处理的数据的结构描述。

**（Conceptual）Schema -- Conceptual View**

从全局角度理解/管理的数据的结构描述，含相应的关联约束，体现在数据之间的内在本质联系。

**Internal Schema -- Internal View** 

存储在介质上的数据的结构描述，含存储路径、存储方式、索引方式等。

#### 两层映像

**E-C Mapping** ： External Schema-Conceptual Schema Mapping 

- 将外模式映射为概念模式，从而支持实现数据概念视图向外部视图的转换。
- 便于用户观察和使用。

**C-I Mapping** : Conceptual Schema-Internal Schema Mapping 

- 将概念模式映射为内模式，从而支持实现数据概念试图向内部视图的转换
- 便于计算机进行存储和处理

**逻辑数据独立性**

当概念模式变化时，可以不改变外部模式（只需改变E-C Mapping),从而无需改变应用程序

**物理数据独立性**

当内部模式变化时，可以不改变概念模式（只需改变C-I Mapping),从而改变外部模式。

### 数据模型

- 规定模型统一描述方式的模型，包括：数据结构，操作和约束。
- **数据模型**是对**模式本身结构**的**抽象**，**模式**是对**数据本身结构形式**的抽象。

### 三大经典数据模型

- 关系模型：**表**的形式组织数据
- 层次模型：**树**的形式组织数据
- 网状模型：**图**的形式组织数据

### 关系模型的例子

**关系模型**：表的形式（表名，元组，属性）

关系模型的模式：比如学生登记表（学号 char(8), 姓名 char(10), 性别 char(2), 入学日期 Datetime）

关系模型的数据：即在表中存储的数据

**层次模型**：树的形式（实体型（节点），系型（指针）

层次模型的模式：节点内由多个数据，由数据指向其他节点

层次模型的数据：不同实体型均有记录

**网状模型**：图的结构（实体型，系型）

网状模型的模式：同样节点上有多个数据，分别指向不同节点

网状模型的数据：类似层次模型，路径的节点均需要记录

### 数据库简要发展史

**第一阶段**：数据库技术**探索**阶段（59-65/67）

- 研制成功格式文件系统
- 正式提出“Data Base”， 并开始进行研究

**第二阶段**：数据库技术**确立**阶段（65/68-75）

- 三大数据库：层次、网状及关系型数据库相继提出并进行深入研究。
- 商用数据库出现并应用，但多为网络及层次型系统。
- 数据库研究形成理论基础，关系数据库理论。

- 数据库应用已十分普及，渗透到社会各个方面，出现众多DB的技术分支，DB走向全面成熟，人称70年代为“数据库的年代”。

**第三阶段**：数据库技术**成熟**阶段（76-80s前期）

- 提出了标准化数据库系统结构模型
- 关系DB系统迅速发展：如SQL，QBE，System R，Ingres等
- 关系理论日臻完善，包括规范化理论，关系语言，RDB的设计与实现，新型关系模型等。
- 数据库应用已十分普及，渗透到社会各个方面，出现众多DB的技术分支，DB走向全面成熟，人称70年代为“数据库的年代”

**第四阶段**：数据库技术**深化发展**阶段（85-至今）

- 数据库方法逐渐理论化，数据库设计理论不断完善
- 新型数据模型，专用数据模型，专用型，新型数据库系统，不断涌现
- 数据库技术+其他计算机技术结合==面向各行各业的专用数据库

# 2、数据库语言-SQL

# 3、数据建模和数据库设计

# 4、数据库管理系统实现技术





# SQL Server Management Studio

## 新建数据库

1、在**对象资源管理器**右键单击**服务器实例**，**新建查询**。

用下列代码

```sql
USE master 
GO 
IF NOT EXISTS (
	SELECT name 
	FROM sys.databases 
	WHERE name = N'DatabaseName'
)
CREATE DATABASE [DatabaseName]
GO 
```

2、选择执行或者用F5来执行查询

3、之后在数据列表内找到新建的数据库（如果没有右键选择刷新）

## 创建表

1、在数据库中打开查询窗口。

2、写入以下代码并执行。

```sql
USE [TutorialDB] --use the db named TutorialDB 
-- Create a new table called 'Customers' in schema 'dbo'
-- Drop the table if it already exists
IF OBJECT_ID('dbo.Customers', 'U') IS NOT NULL -- if the object_id is not NULL 
DROP TABLE dbo.Customers -- Drop 删除表
GO
-- Create the table in the specified schema 
CREATE TABLE dbo.Customers -- else create the table named dbo.Customers 
( -- 属性值
   CustomerId        INT    NOT NULL   PRIMARY KEY, -- primary key column 主键
   Name      [NVARCHAR](50)  NOT NULL,
   Location  [NVARCHAR](50)  NOT NULL,
   Email     [NVARCHAR](50)  NOT NULL
);
--GO -- 执行
```

3、刷新后查看创建的表。

## 删除表中的所有数据

```sql 
DELETE FROM Student WHERE 1=1;
```

或者

```sql 
TRUNCATE TABLE Student; --更高效，但是无法指定删除条件和无法返回删除的记录数 
```

