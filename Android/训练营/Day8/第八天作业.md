# 第八天作业

![image-20240713155113608](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240713155113608.png)

## 1、完成“标签”控件，包括自定义属性, 自定义：text，customtext，color：

### **准备工作**：

**目录结构**：

- `CustomLayout`：包含`TagLayout`自定义布局。
- `CustomTextView`：包含自定义文本控件如`ColorChangingTextView`，`GradientTextView`，`ShadowTextView`，`UnderlineTextView`。
- `CustomImageView`：包含自定义图像控件`CustomImageView`。

**自定义布局文件**：

- `TagLayout`：作为自定义标签布局容器，继承自`ViewGroup`, 实现**标签**格式。

**自定义文本控件**：

- `ColorChangingTextView`，`GradientTextView`，`ShadowTextView`，`UnderlineTextView`：继承自`TextView`，实现特定的文本显示效果，如颜色变化、渐变效果、阴影效果和下划线。

**自定义图像控件**：

- `CustomImageView`：继承自`ImageView`，实现了自定义的图像显示效果，包括圆角裁剪和触摸事件处理。

**Drawable资源**：

- `res/drawable`目录下包含多个圆角背景资源文件，如`rounded_corner_blue.xml`，`rounded_corner_green.xml`，`rounded_corner_purple.xml`，`rounded_corner_red.xml`，`rounded_corner_teal.xml`，用于设置各个标签的背景。

**布局文件**：

- `activity_main.xml`：应用主布局文件，包含`TagLayout`自定义布局，内嵌各个自定义文本控件和`CustomImageView`控件。

### 界面截图：

![image-20240713195614858](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240713195614858.png)

## 2、实现View跟随手指滑动效果

### **准备工作**：

通过实现 `onTouchEvent` 方法，监听触摸事件，根据手指移动的距离来更新 View 的位置。

**详细步骤**：

1. **记录手指初始位置**：
   - 在 `ACTION_DOWN` 事件中记录手指按下时的 X 和 Y 坐标（`lastX` 和 `lastY`）。
2. **计算移动距离并更新 View 位置**：
   - 在 `ACTION_MOVE` 事件中，计算当前手指位置与初始位置的差值（`dx` 和 `dy`），并调用 `updateView(dx, dy)` 更新 View 位置。
3. **还原初始状态**：
   - 在 `ACTION_UP` 和 `ACTION_CANCEL` 事件中，恢复 View 的初始缩放比例。

**程序中有三种实现方式:**

![image-20240713181053936](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240713181053936.png)

**实现方法的不同功能异同**：

1. **方式一：直接设置 X 和 Y 坐标**：

   - 简单直接更新位置，但不改变布局属性。

   **方式二：通过 layout 方法改变位置**：

   - 更新位置并改变布局属性，但实现较复杂。

   **方式三：使用 ViewPropertyAnimator 平滑移动**：

   - 实现平滑动画效果，但有轻微性能开销。

### **录制视频**：

[./录制MP4视频/TouchMove.mp4](./录制MP4视频/TouchMove.mp4)

<video src="./录制MP4视频/TouchMove.mp4" controls style="width: 100%; height: auto;"></video>

