# 第五天作业

![image-20240710162743255](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710162743255.png)

## 1、正常写出UI图 

**实现界面**：

![image-20240711001807724](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240711001807724.png)

**准备工作**：

**布局文件 (activity_help_center.xml)**:

- **标题**: 显示“小米账号帮助中心”。
- **搜索框**: 包含图标和`EditText`的搜索框。
- **自助服务区**: 显示重置密码、账号申诉、冻结账号等自助服务选项。
- **帮助类别**: 包含不同帮助类别的水平方向`LinearLayout`。
- **碎片容器**: 显示下面的不同选项的问题，`FrameLayout`用于显示`HelpFragment`。
- **Fragment** :`Fragment`内部是一个`RecyclerView`， 可以实现底部多个问题的展示

**HelpCenterActivity.java**:

- **初始化**: 在`onCreate`方法中设置布局，初始化UI组件，并设置事件监听器。
- **语言选择**: 使用`Spinner`选择不同语言（简体中文、繁体中文、英语）。
- **碎片管理**: 使用`HelpFragment`显示帮助主题，初始加载FAQ。
- **点击监听器**: 实现`OnClickListener`，处理不同帮助类别的点击（FAQ、登录、修改信息、账号安全）。
- **重置按钮**: 重置按钮状态的方法。

**演示视频**：

[./录制MP4视频/showUI.mp4](./录制MP4视频/showUI.mp4)

<video src="./录制MP4视频/showUI.mp4" controls style="width: 100%; height: auto;"></video>

## 2、使用最少布局层级实现，查看页面过度绘制，尽量优化代码层级结构，提供过度绘制截图 

**优化代码层级结构**：

![image-20240710225159236](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710225159236.png)

**1、使用`ConstraintLayout`**:

- 使用`ConstraintLayout`作为根布局，它提供了灵活且高效的布局方式，减少了嵌套层级。
- 相较于`LinearLayout`和`RelativeLayout`，`ConstraintLayout`可以直接定义控件之间的约束关系，减少不必要的嵌套。

**2、复用布局**:

- 通过`include`标签复用相同的布局部分，例如顶部的返回箭头和自助服务区。这减少了重复代码和布局层级，提高了可维护性和性能。

**过渡绘制截图**：

![image-20240710223207511](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710223207511.png)

**演示视频**：

[./录制MP4视频/showUI_OverDraw.mp4](./录制MP4视频/showUI_OverDraw.mp4)

<video src="./录制MP4视频/showUI_OverDraw.mp4" controls style="width: 100%; height: auto;"></video>

## 3、使用include优化布局代码，减少xml代码量

#### 使用`<include>`标签

在主布局文件中运用了两处`<include>`标签：

**1、顶部的返回箭头和其他控件**

![image-20240710224321868](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710224321868.png)

```xml
<include
    android:id="@+id/include_header"
    layout="@layout/header"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent" />
```

在这样提取头部布局， 这样可以在其他类似的页面重复显示头部，简化代码。

**2、自助服务区**

![image-20240710224448432](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710224448432.png)

```xml
<include
    android:id="@+id/include_self_service"
    layout="@layout/self_service"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toBottomOf="@id/tv_help" />
```

运用同样的`<include>`标签， 可以在其他页面复用此布局。

![image-20240710224630212](https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240710224630212.png)

这样保证主布局`activity_help_center.xml`有200行， 不至于很长， 方便调整布局的位置， 并且可以复用代码。

通过使用`<include>`标签，可以将复杂布局拆分成多个小的、可复用的布局文件。这些小的布局文件在主布局文件中被引用，从而减少了XML代码量，提高了布局文件的可读性和可维护性。