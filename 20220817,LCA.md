

# 20220817,LCA

```c++

#include<bits/stdc++.h>
using namespace std;
inline int read()
{
	char ch=getchar();
	int x=0,f=1;
	while(ch>'9'||ch<'0'){
		if(ch=='-');
		f=-1;
		ch=getchar();
	} 
	while('0'<=ch&&ch<='9')
	{
    	x=x*10+ch-'0';
    	ch=getchar();
	}
	return x*f;
}

inline void put(int x)  
{    
	if(x==0)
	{
		putchar('0');
		putchar('\n');
		return;
	}
	int num=0;
	char c[25];
	while(x)
	{
		c[++num]=(x%10)+48;
		x/=10;
	}
	while(num)
		putchar(c[num--]);
	putchar('\n');
	return ;
}

int n,m,s,x,y,tot=0;
const int N=500005,M=1000005;
int head[N],to[M],nxt[M];
int deep[N],fa[N][22],lg[N];
void add(int x,int y)
{
	to[++tot]=y;
	nxt[tot]=head[x];
	head[x]=tot;
    return ;
}
void dfs(int x,int y)
{
	deep[x]=deep[y]+1;
	fa[x][0]=y;
	for(int i=1;(1<<i)<=deep[x];++i)
		fa[x][i]=fa[fa[x][i-1]][i-1];
	for(int i=head[x];i;i=nxt[i])
		if(to[i]!=y)
			dfs(to[i],x);
	return ;
}
int LCA(int x,int y)
{
	if(deep[x]<deep[y])
		swap(x,y);
	while(deep[x]>deep[y])
		x=fa[x][lg[deep[x]-deep[y]]-1];
	if(x==y)
		return x;
	for(int k=lg[deep[x]];k>=0;--k)
		if(fa[x][k]!=fa[y][k])
		{
			x=fa[x][k];
			y=fa[y][k];
		}	
	return fa[x][0];
}
int main()
{
	n=read();m=read();s=read();
	
	for(int i=1;i<n;i++)
	{
		x=read();y=read();
		add(x,y);add(y,x);
	}
	dfs(s,0);
	
	for(int i=1;i<=n;++i)
		lg[i]=lg[i-1]+(1<<lg[i-1]==i);
	
	
	for(int i=1;i<=m;++i)
	{
		x=read();y=read();
		put(LCA(x,y));
	}
	
	return 0;
} 
```

# 2.dfs

```c++
#include<bits/stdc++.h>
using namespace std;
int p[10];
bool vis[10];
int n;
void dfs(int x){
	if(x==n+1){
		for(int i=1;i<=n;i++){
			cout<<p[i]<<" ";
		}
		cout<<endl; 
		return ;
	} 
	for(int i=1;i<=n;i++){
		if(vis[i]==false){
			p[x]=i;
			vis[i]=true;
			dfs(x+1);
			vis[i]=false;
		}
	}
}
int main()
{
	while(cin>>n){
		dfs(1);
	}
	return 0;
}
```

