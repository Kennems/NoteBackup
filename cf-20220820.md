# cf-20220820

## c.

### 极限思维，先思考一个全是一样的排列的块数是多少，为n*(n-1)/2，再思考不是全一样的排列会有哪些不同，全不一样块数最多，由不一样的则需要再补上一些，补上的个数为n*(n-1)

```c++
#include<bits/stdc++.h>
using namespace std;
#define int long long 
const int maxn=1e5+100;
int a[maxn];
signed main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);
	int n,m;
	cin>>n>>m;
	for(int i=1;i<=n;++i){
		cin>>a[i];
	}
	int ans=0;
	for(int i=1;i<=n;++i){
		ans+=(a[i]!=a[i+1])*(n-i)*i;
		//cout<<ans<<endl;
	}
	while(m--){
		int i,x;
		cin>>i>>x;
		ans-=(a[i]!=a[i-1])*(n-i+1)*(i-1);
		ans-=(a[i]!=a[i+1])*(n-i)*i;
		a[i]=x;
		ans+=(a[i]!=a[i+1])*(n-i)*i;
		ans+=(a[i]!=a[i-1])*(n-i+1)*(i-1);
		cout<<ans+(n)*(n+1)/2<<endl;
	}
	return 0;
}
```

